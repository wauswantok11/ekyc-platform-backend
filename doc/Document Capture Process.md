graph TD
    A[เริ่มต้นถ่ายรูป] --> B[ขออนุญาตใช้กล้อง]
    B --> C{อนุญาตใช้กล้อง?}
    C -->|ไม่| D[แสดงข้อความแจ้งเตือน]
    C -->|ใช่| E[เปิดกล้อง]
    
    D --> F[ให้ผู้ใช้อนุญาตใหม่]
    F --> B
    
    E --> G[ถ่ายรูปหน้าบัตร]
    G --> H[ตรวจสอบคุณภาพรูป]
    H --> I{คุณภาพดี?}
    I -->|ไม่| J[แจ้งให้ถ่ายใหม่]
    I -->|ใช่| K[บันทึกรูปหน้าบัตร]
    
    J --> G
    K --> L[ถ่ายรูปหลังบัตร]
    L --> M[ตรวจสอบคุณภาพรูป]
    M --> N{คุณภาพดี?}
    N -->|ไม่| O[แจ้งให้ถ่ายใหม่]
    N -->|ใช่| P[บันทึกรูปหลังบัตร]
    
    O --> L
    P --> Q[ขั้นตอนถัดไป]